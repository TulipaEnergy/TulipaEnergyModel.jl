<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>How to Use · TulipaEnergyModel.jl</title><meta name="title" content="How to Use · TulipaEnergyModel.jl"/><meta property="og:title" content="How to Use · TulipaEnergyModel.jl"/><meta property="twitter:title" content="How to Use · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/20-user-guide/20-how-to-use/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/20-user-guide/20-how-to-use/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/20-user-guide/20-how-to-use/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="TulipaEnergyModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../10-tutorials/12-basics/">The Basics</a></li><li><a class="tocitem" href="../../10-tutorials/13-assets/">Assets and Flows</a></li><li><a class="tocitem" href="../../10-tutorials/14-fully-flexible-time/">Flexible Time Resolution</a></li><li><a class="tocitem" href="../../10-tutorials/15-clustering-rep-periods/">Representative Periods with Tulipa Clustering</a></li><li><a class="tocitem" href="../../10-tutorials/16-storage/">Seasonal and Non-seasonal Storage</a></li><li><a class="tocitem" href="../../10-tutorials/17-workflow/">Workflow</a></li><li><a class="tocitem" href="../../10-tutorials/99-manual-steps/">Advanced Control</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../00-getting-started/">Getting Started</a></li><li class="is-active"><a class="tocitem" href>How to Use</a><ul class="internal"><li><a class="tocitem" href="#Running-a-Scenario"><span>Running a Scenario</span></a></li><li><a class="tocitem" href="#Finding-an-input-parameter"><span>Finding an input parameter</span></a></li><li><a class="tocitem" href="#Running-automatic-tests"><span>Running automatic tests</span></a></li><li><a class="tocitem" href="#input"><span>Input and Output</span></a></li><li><a class="tocitem" href="#Setting-the-solver-and-its-parameters"><span>Setting the solver and its parameters</span></a></li><li><a class="tocitem" href="#infeasible"><span>Exploring infeasibility</span></a></li><li><a class="tocitem" href="#need-for-speed"><span>Speeding up model creation</span></a></li><li><a class="tocitem" href="#Activating-specific-constraints"><span>Activating specific constraints</span></a></li><li><a class="tocitem" href="#coefficient-for-conversion-constraints"><span>Using the coefficient for flows in the conversion constraints</span></a></li><li><a class="tocitem" href="#flow-relationships"><span>Defining Flows Relationships</span></a></li><li><a class="tocitem" href="#greenhouse-gas-emissions"><span>Modeling Greenhouse Gas Emissions (e.g., CO2)</span></a></li></ul></li><li><a class="tocitem" href="../50-schemas/">Analysis Workflow</a></li><li><a class="tocitem" href="../55-outputs/">Output Variables</a></li><li><a class="tocitem" href="../60-structures/">Internal Model Structures</a></li></ul></li><li><a class="tocitem" href="../../30-concepts/">Concepts</a></li><li><span class="tocitem">Scientific Foundation</span><ul><li><a class="tocitem" href="../../40-scientific-foundation/40-formulation/">Mathematical Formulation</a></li><li><a class="tocitem" href="../../40-scientific-foundation/45-scientific-references/">Scientific References</a></li></ul></li><li><a class="tocitem" href="../../70-reference/">API Reference</a></li><li><a class="tocitem" href="../../80-ecosystem/">Tulipa Ecosystem</a></li><li><span class="tocitem">Contributing</span><ul><li><a class="tocitem" href="../../90-contributing/90-contributing/">Contributing Guidelines</a></li><li><a class="tocitem" href="../../90-contributing/91-developer/">Developer Documentation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>How to Use</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>How to Use</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/main/docs/src/20-user-guide/20-how-to-use.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="how-to-use"><a class="docs-heading-anchor" href="#how-to-use">How to Use</a><a id="how-to-use-1"></a><a class="docs-heading-anchor-permalink" href="#how-to-use" title="Permalink"></a></h1><ul><li><a href="#Running-a-Scenario">Running a Scenario</a></li><li><a href="#Finding-an-input-parameter">Finding an input parameter</a></li><li><a href="#Running-automatic-tests">Running automatic tests</a></li><li><a href="#input">Input and Output</a></li><li class="no-marker"><ul><li><a href="#Input">Input</a></li><li><a href="#Output">Output</a></li></ul></li><li><a href="#Setting-the-solver-and-its-parameters">Setting the solver and its parameters</a></li><li><a href="#infeasible">Exploring infeasibility</a></li><li><a href="#need-for-speed">Speeding up model creation</a></li><li class="no-marker"><ul><li><a href="#Disable-names-of-variables-and-constraints">Disable names of variables and constraints</a></li><li><a href="#Create-a-direct-model">Create a direct model</a></li></ul></li><li><a href="#Activating-specific-constraints">Activating specific constraints</a></li><li class="no-marker"><ul><li><a href="#Storage-constraints">Storage constraints</a></li><li><a href="#unit-commitment-setup">Unit Commitment constraints</a></li><li><a href="#ramping-setup">Ramping constraints</a></li><li><a href="#max-min-outgoing-energy-setup">Outgoing energy constraints (maximum or minimum)</a></li><li><a href="#Group-constraints">Group constraints</a></li><li><a href="#multi-year-setup">Multi-year investments</a></li><li><a href="#coefficient-for-capacity-constraints">Flow Coefficient in Capacity constraints</a></li></ul></li><li><a href="#coefficient-for-conversion-constraints">Using the coefficient for flows in the conversion constraints</a></li><li><a href="#flow-relationships">Defining Flows Relationships</a></li><li><a href="#greenhouse-gas-emissions">Modeling Greenhouse Gas Emissions (e.g., CO2)</a></li></ul><p>This section assumes users have already followed the Tutorials and are looking for specific instructions for certain features.</p><h2 id="Running-a-Scenario"><a class="docs-heading-anchor" href="#Running-a-Scenario">Running a Scenario</a><a id="Running-a-Scenario-1"></a><a class="docs-heading-anchor-permalink" href="#Running-a-Scenario" title="Permalink"></a></h2><p>To run a scenario, use the function:</p><ul><li><a href="../../70-reference/#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>run_scenario(connection)</code></a></li><li><a href="../../70-reference/#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>run_scenario(connection; output_folder)</code></a></li></ul><p>The <code>connection</code> should have been created and the data loaded into it using <a href="https://github.com/TulipaEnergy/TulipaIO.jl">TulipaIO</a>. See the <a href="../../10-tutorials/17-workflow/#workflow-tutorial">Workflow Tutorial</a> for a complete guide on how to achieve this. The <code>output_folder</code> is optional if the user wants to export the output.</p><h2 id="Finding-an-input-parameter"><a class="docs-heading-anchor" href="#Finding-an-input-parameter">Finding an input parameter</a><a id="Finding-an-input-parameter-1"></a><a class="docs-heading-anchor-permalink" href="#Finding-an-input-parameter" title="Permalink"></a></h2><div class="admonition is-success" id="Are-you-looking-for-an-input-parameter?-43a906a17885eb9c"><header class="admonition-header">Are you looking for an input parameter?<a class="admonition-anchor" href="#Are-you-looking-for-an-input-parameter?-43a906a17885eb9c" title="Permalink"></a></header><div class="admonition-body"><p>Please visit the <a href="../50-schemas/#table-schemas">Model Parameters</a> section for a description and location of all model input parameters.</p></div></div><h2 id="Running-automatic-tests"><a class="docs-heading-anchor" href="#Running-automatic-tests">Running automatic tests</a><a id="Running-automatic-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Running-automatic-tests" title="Permalink"></a></h2><p>To run the automatic tests on your installation of TulipaEnergyModel:</p><ul><li>Enter package mode (press &quot;]&quot;)</li></ul><pre><code class="language-julia-pkg hljs">pkg&gt; test TulipaEnergyModel
# This takes a minute or two...</code></pre><p>All tests should pass. (If you have an error in your analysis, it is probably not caused by TulipaEnergyModel.)</p><div class="admonition is-warning" id="Admin-rights-on-your-local-machine-e2b5b43bd418b744"><header class="admonition-header">Admin rights on your local machine<a class="admonition-anchor" href="#Admin-rights-on-your-local-machine-e2b5b43bd418b744" title="Permalink"></a></header><div class="admonition-body"><p>Ensure you have admin rights on the folder where the package is installed; otherwise, an error will appear during the tests.</p></div></div><h2 id="input"><a class="docs-heading-anchor" href="#input">Input and Output</a><a id="input-1"></a><a class="docs-heading-anchor-permalink" href="#input" title="Permalink"></a></h2><p>Tulipa runs from tables in DuckDB, which can be loaded from many formats (CSV, Parquet, etc). See the workflow tutorial for more information on inputting data.</p><h3 id="Input"><a class="docs-heading-anchor" href="#Input">Input</a><a id="Input-1"></a><a class="docs-heading-anchor-permalink" href="#Input" title="Permalink"></a></h3><p>Tulipa runs from strictly defined files that follow the <a href="../50-schemas/#table-schemas">Schemas</a>. See the workflow section for more information on how to work with the schema.</p><p>You can check the <a href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/tree/main/test/inputs"><code>test/inputs</code> folder</a> for examples of different predefined energy systems and features. Moreover, Tulipa&#39;s Offshore Bidding Zone Case Study can be found in <a href="https://github.com/TulipaEnergy/Tulipa-OBZ-CaseStudy">https://github.com/TulipaEnergy/Tulipa-OBZ-CaseStudy</a>. It shows how to start from user-friendly files and transform the data into the input files in the <a href="../50-schemas/#table-schemas">Schemas</a> through different functions.</p><h3 id="Output"><a class="docs-heading-anchor" href="#Output">Output</a><a id="Output-1"></a><a class="docs-heading-anchor-permalink" href="#Output" title="Permalink"></a></h3><p>Outputs are sent from Tulipa to DuckDB and can be exported to various file formats.</p><p>To save the solution to CSV files, you can use <a href="../../70-reference/#TulipaEnergyModel.export_solution_to_csv_files-NTuple{4, Any}"><code>export_solution_to_csv_files</code></a>. See the <a href="../../10-tutorials/17-workflow/#step-export">Workflow Tutorial</a> for an example showcasing this function.</p><h2 id="Setting-the-solver-and-its-parameters"><a class="docs-heading-anchor" href="#Setting-the-solver-and-its-parameters">Setting the solver and its parameters</a><a id="Setting-the-solver-and-its-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-the-solver-and-its-parameters" title="Permalink"></a></h2><p>By default, the model is solved using the <a href="https://github.com/jump-dev/HiGHS.jl">HiGHS</a> optimizer (or solver). To change this, you can give the functions <a href="../../70-reference/#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>run_scenario</code></a> or <a href="../../70-reference/#TulipaEnergyModel.create_model!-Tuple{Any}"><code>create_model!</code></a> a different optimizer.</p><div class="admonition is-warning" id="Warning-178fbc41693fe710"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-178fbc41693fe710" title="Permalink"></a></header><div class="admonition-body"><p>HiGHS is the only open source solver that we recommend. GLPK and Cbc are not (fully) tested for Tulipa.</p></div></div><p>Here is an example running the Tiny case using the <a href="https://github.com/jump-dev/GLPK.jl">GLPK</a> optimizer:</p><pre><code class="language-julia hljs">using DuckDB, TulipaIO, TulipaEnergyModel, GLPK

input_dir = &quot;../../test/inputs/Tiny&quot; # you path will be different
connection = DBInterface.connect(DuckDB.DB)
read_csv_folder(connection, input_dir; schemas = TulipaEnergyModel.schema_per_table_name)
energy_problem = run_scenario(connection; optimizer = GLPK.Optimizer)
#OR create_model!(energy_problem; optimizer = GLPK.Optimizer)</code></pre><div class="admonition is-info" id="Info-3a5aef0d7baaccca"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-3a5aef0d7baaccca" title="Permalink"></a></header><div class="admonition-body"><p>Notice that you need to add the GLPK package and run <code>using GLPK</code> before running <code>GLPK.Optimizer</code>.</p></div></div><p>In both cases above, the <code>GLPK</code> optimizer uses its default parameters, which you can query using <a href="../../70-reference/#TulipaEnergyModel.default_parameters-Tuple{Any}"><code>default_parameters</code></a>. To change any optimizer parameters, you can pass a dictionary to the <code>optimizer_parameters</code> keyword argument. The example below changes the maximum allowed runtime for GLPK to 1 second, which will probably cause it to fail to converge in time.</p><pre><code class="language-julia hljs"># change the optimizer parameters
parameter_dict = Dict(&quot;tm_lim&quot; =&gt; 1) # list optimizer parameters as comma-separated parameter=&gt;value pairs
energy_problem = run_scenario(connection; optimizer = GLPK.Optimizer, optimizer_parameters = parameter_dict)
#OR create_model!(energy_problem; optimizer = GLPK.Optimizer, optimizer_parameters = parameter_dict)
energy_problem.termination_status</code></pre><p>If <code>direct_model = false</code> you can change the optimizer and parameters after creating the model (but before solving it) using the JuMP commands demonstrated below. For more information on <code>direct_model</code>, see <a href="#need-for-speed">Speed improvements in the model creation</a>.</p><pre><code class="language-julia hljs"># create the model and solve with the default optimizer and optimizer parameters
energy_problem = EnergyProblem(connection)
create_model!(energy_problem)
solve_model(energy_problem)

# change the solver and parameters and resolve:
parameter_dict = Dict(&quot;tm_lim&quot; =&gt; 1) # list optimizer parameters as comma-separated parameter=&gt;value pairs

JuMP.set_optimizer(energy_problem.model, GLPK.Optimizer) # change the optimizer
for (k, v) in optimizer_parameters
    JuMP.set_attribute(energy_problem.model, k, v) # change the optimizer_parameters
end

solve_model(energy_problem) # solve the model with new optimizer &amp; optimizer_parameters</code></pre><p>For the complete list of parameters, check your chosen optimizer.</p><p>You can also pass these parameters via a file using the <a href="../../70-reference/#TulipaEnergyModel.read_parameters_from_file-Tuple{Any}"><code>read_parameters_from_file</code></a> function.</p><h2 id="infeasible"><a class="docs-heading-anchor" href="#infeasible">Exploring infeasibility</a><a id="infeasible-1"></a><a class="docs-heading-anchor-permalink" href="#infeasible" title="Permalink"></a></h2><p>If your model is infeasible, you can try exploring the infeasibility with <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#JuMP.compute_conflict!">JuMP.compute_conflict!</a> and <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#JuMP.copy_conflict">JuMP.copy_conflict</a>.</p><div class="admonition is-warning" id="Check-your-solver-options!-fc63f6d8920518ab"><header class="admonition-header">Check your solver options!<a class="admonition-anchor" href="#Check-your-solver-options!-fc63f6d8920518ab" title="Permalink"></a></header><div class="admonition-body"><p>Not all solvers support this functionality; please check your specific solver.</p></div></div><p>Use <code>energy_problem.model</code> for the model argument. For instance:</p><pre><code class="language-julia hljs">if energy_problem.termination_status == INFEASIBLE
  compute_conflict!(energy_problem.model)
  iis_model, reference_map = copy_conflict(energy_problem.model)
  print(iis_model)
end</code></pre><h2 id="need-for-speed"><a class="docs-heading-anchor" href="#need-for-speed">Speeding up model creation</a><a id="need-for-speed-1"></a><a class="docs-heading-anchor-permalink" href="#need-for-speed" title="Permalink"></a></h2><h3 id="Disable-names-of-variables-and-constraints"><a class="docs-heading-anchor" href="#Disable-names-of-variables-and-constraints">Disable names of variables and constraints</a><a id="Disable-names-of-variables-and-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Disable-names-of-variables-and-constraints" title="Permalink"></a></h3><p>If you want to speed-up model creation, consider disabling the naming of variables and constraints. Of course, removing the names will make debugging difficult (or impossible) - so enable/disable naming as needed for your analysis.</p><pre><code class="language-julia hljs"># Disable names while using run_scenario
run_scenario(connection; enable_names = false)

# OR while using create_model!
create_model!(energy_problem; enable_names = false)</code></pre><p>For more information, see the JuMP documentation for <a href="https://jump.dev/JuMP.jl/stable/tutorials/getting_started/performance_tips/#Disable-string-names">Disable string names</a>.</p><h3 id="Create-a-direct-model"><a class="docs-heading-anchor" href="#Create-a-direct-model">Create a direct model</a><a id="Create-a-direct-model-1"></a><a class="docs-heading-anchor-permalink" href="#Create-a-direct-model" title="Permalink"></a></h3><p>If you want to reduce memory usage, consider using <code>direct_model = true</code>. This restricts certain actions after model creation, such as changing the optimizer.</p><pre><code class="language-julia hljs"># Create direct model with run_scenario
run_scenario(connection; direct_model = true)

# OR while using create_model!
create_model!(energy_problem; direct_model = true)</code></pre><p>For more information, see the JuMP documentation for <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#direct_model"><code>direct_model</code></a>.</p><h2 id="Activating-specific-constraints"><a class="docs-heading-anchor" href="#Activating-specific-constraints">Activating specific constraints</a><a id="Activating-specific-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Activating-specific-constraints" title="Permalink"></a></h2><h3 id="Storage-constraints"><a class="docs-heading-anchor" href="#Storage-constraints">Storage constraints</a><a id="Storage-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-constraints" title="Permalink"></a></h3><h4 id="seasonal-setup"><a class="docs-heading-anchor" href="#seasonal-setup">Seasonal and non-seasonal storage</a><a id="seasonal-setup-1"></a><a class="docs-heading-anchor-permalink" href="#seasonal-setup" title="Permalink"></a></h4><p>Section <a href="../../30-concepts/#storage-modeling">Storage Modeling</a> explains the main concepts for modeling seasonal and non-seasonal storage in <em>TulipaEnergyModel.jl</em>. To define if an asset is one type or the other then consider the following:</p><ul><li><em>Seasonal storage</em>: When the storage capacity of an asset is greater than the total length of representative periods, we recommend using the over-clustered-year constraints. To apply these constraints, you must set the input parameter <code>is_seasonal</code> to <code>true</code>.</li><li><em>Non-seasonal storage</em>: When the storage capacity of an asset is lower than the total length of representative periods, we recommend using the rep-period constraints. To apply these constraints, you must set the input parameter <code>is_seasonal</code> to <code>false</code>.</li></ul><div class="admonition is-info" id="Info-e6dd45b89d74277f"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-e6dd45b89d74277f" title="Permalink"></a></header><div class="admonition-body"><p>If the input data covers only one representative period for the entire year, for example, with 8760-hour timesteps, and you have a monthly hydropower plant, then you should set the <code>is_seasonal</code> parameter for that asset to <code>false</code>. This is because the length of the representative period is greater than the storage capacity of the storage asset.</p></div></div><h4 id="storage-investment-setup"><a class="docs-heading-anchor" href="#storage-investment-setup">The energy storage investment method</a><a id="storage-investment-setup-1"></a><a class="docs-heading-anchor-permalink" href="#storage-investment-setup" title="Permalink"></a></h4><p>Energy storage assets have a unique characteristic wherein the investment is based not solely on the capacity to charge and discharge, but also on the energy capacity. Some storage asset types have a fixed duration for a given capacity, which means that there is a predefined ratio between energy and power. For instance, a battery of 10MW/unit and 4h duration implies that the energy capacity is 40MWh. Conversely, other storage asset types don&#39;t have a fixed ratio between the investment of capacity and storage capacity. Therefore, the energy capacity can be optimized independently of the capacity investment, such as hydrogen storage in salt caverns. To define if an energy asset is one type or the other then consider the following parameters:</p><ul><li><p><em>Investment energy method</em>: To use this method, set the parameter <code>storage_method_energy</code> to <code>true</code>. In addition, it is necessary to define:</p><ul><li><code>investment_cost_storage_energy</code>: To establish the cost of investing in the storage capacity (e.g., kEUR/MWh/unit).</li><li><code>fixed_cost_storage_energy</code>: To establish the fixed cost of energy storage capacity (e.g., kEUR/MWh/unit).</li><li><code>investment_limit_storage_energy</code>: To define the potential of the energy capacity investment (e.g., MWh). <code>Missing</code> values mean that there is no limit.</li><li><code>investment_integer_storage_energy</code>: To determine whether the investment variables of storage capacity are integers of continuous.</li></ul></li><li><p><em>Fixed energy-to-power ratio method</em>: To use this method, set the parameter <code>storage_method_energy</code> to <code>false</code>. In addition, it is necessary to define the parameter <code>energy_to_power_ratio</code> to establish the predefined duration of the storage asset or ratio between energy and power. Note that all the investment costs should be allocated in the parameter <code>investment_cost</code>.</p></li></ul><p>In addition, the parameter <code>capacity_storage_energy</code> defines the energy per unit of storage capacity invested in (e.g., MWh/unit).</p><p>For more details on the constraints that apply when selecting one method or the other, please visit the <a href="../../40-scientific-foundation/40-formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h4 id="storage-binary-method-setup"><a class="docs-heading-anchor" href="#storage-binary-method-setup">Control simultaneous charging and discharging</a><a id="storage-binary-method-setup-1"></a><a class="docs-heading-anchor-permalink" href="#storage-binary-method-setup" title="Permalink"></a></h4><p>Depending on the configuration of the energy storage assets, it may or may not be possible to charge and discharge them simultaneously. For instance, a single battery cannot charge and discharge at the same time, but some pumped hydro storage technologies have separate components for charging (pump) and discharging (turbine) that can function independently, allowing them to charge and discharge simultaneously. To account for these differences, the model provides users with three options for the <code>use_binary_storage_method</code> parameter:</p><ul><li><code>binary</code>: the model adds a binary variable to prevent charging and discharging simultaneously.</li><li><code>relaxed_binary</code>: the model adds a binary variable that allows values between 0 and 1, reducing the likelihood of charging and discharging simultaneously. This option uses a tighter set of constraints close to the convex hull of the full formulation, resulting in fewer instances of simultaneous charging and discharging in the results.</li><li>If no value is set, i.e., <code>missing</code> value, the storage asset can charge and discharge simultaneously.</li></ul><p>For more details on the constraints that apply when selecting this method, please visit the <a href="../../40-scientific-foundation/40-formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h3 id="unit-commitment-setup"><a class="docs-heading-anchor" href="#unit-commitment-setup">Unit Commitment constraints</a><a id="unit-commitment-setup-1"></a><a class="docs-heading-anchor-permalink" href="#unit-commitment-setup" title="Permalink"></a></h3><p>The unit commitment constraints are only applied to producer and conversion assets. The <code>unit_commitment</code> parameter must be set to <code>true</code> to include the constraints. Additionally, the following parameters should be set in that same file:</p><ul><li><code>unit_commitment_method</code>: It determines which unit commitment method to use. The current version of the code only includes the basic version. Future versions will add more detailed constraints as additional options.</li><li><code>units_on_cost</code>: Objective function coefficient on <code>units_on</code> variable. (e.g., no-load cost or idling cost in kEUR/h/unit)</li><li><code>unit_commitment_integer</code>: It determines whether the unit commitment variables are considered as integer or not (<code>true</code> or <code>false</code>)</li><li><code>min_operating_point</code>: Minimum operating point or minimum stable generation level defined as a portion of the capacity of asset (p.u.)</li></ul><p>For more details on the constraints that apply when selecting this method, please visit the <a href="../../40-scientific-foundation/40-formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h3 id="ramping-setup"><a class="docs-heading-anchor" href="#ramping-setup">Ramping constraints</a><a id="ramping-setup-1"></a><a class="docs-heading-anchor-permalink" href="#ramping-setup" title="Permalink"></a></h3><p>The ramping constraints are only applied to producer and conversion assets. The <code>ramping</code> parameter must be set to <code>true</code> to include the constraints. Additionally, the following parameters should be set in that same file:</p><ul><li><code>max_ramp_up</code>: Maximum ramping up rate as a portion of the capacity of asset (p.u./h)</li><li><code>max_ramp_down:</code>Maximum ramping down rate as a portion of the capacity of asset (p.u./h)</li></ul><p>For more details on the constraints that apply when selecting this method, please visit the <a href="../../40-scientific-foundation/40-formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h3 id="max-min-outgoing-energy-setup"><a class="docs-heading-anchor" href="#max-min-outgoing-energy-setup">Outgoing energy constraints (maximum or minimum)</a><a id="max-min-outgoing-energy-setup-1"></a><a class="docs-heading-anchor-permalink" href="#max-min-outgoing-energy-setup" title="Permalink"></a></h3><p>For the model to add constraints for a <a href="../../40-scientific-foundation/40-formulation/#over-clustered-year-energy-constraints">maximum or minimum energy limit</a> for an asset throughout the model&#39;s timeframe (e.g., a year), we need to establish a couple of parameters:</p><ul><li><code>is_seasonal = true</code>. This parameter enables the model to use the over-clustered-year constraints.</li><li><code>max_energy_timeframe_partition</code> <span>$\neq$</span> <code>missing</code> or <code>min_energy_timeframe_partition</code> <span>$\neq$</span> <code>missing</code>. This value represents the peak energy that will be then multiplied by the profile for each period in the timeframe.</li></ul><div class="admonition is-info" id="Info-38976ddd552af732"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-38976ddd552af732" title="Permalink"></a></header><div class="admonition-body"><p>These parameters are defined per period, and the default values for profiles are 1.0 p.u. per period. If the periods are determined daily, the energy limit for the whole year will be 365 times <code>max</code>or <code>min_energy_timeframe_partition</code>.</p></div></div><ul><li>(optional) <code>profile_type</code> and <code>profile_name</code> in the timeframe files. If there is no profile defined, then by default it is 1.0 p.u. for all periods in the timeframe.</li><li>(optional) define a period partition in timeframe partition files. If there is no partition defined, then by default the constraint is created for each period in the timeframe, otherwise, it will consider the partition definition in the file.</li></ul><div class="admonition is-success" id="Tip-c04f92c70f382750"><header class="admonition-header">Tip<a class="admonition-anchor" href="#Tip-c04f92c70f382750" title="Permalink"></a></header><div class="admonition-body"><p>If you want to set a limit on the maximum or minimum outgoing energy for a year with representative days, you can use the partition definition to create a single partition for the entire year to combine the profile.</p></div></div><h4 id="Example:-Setting-Energy-Limits"><a class="docs-heading-anchor" href="#Example:-Setting-Energy-Limits">Example: Setting Energy Limits</a><a id="Example:-Setting-Energy-Limits-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-Setting-Energy-Limits" title="Permalink"></a></h4><p>Let&#39;s assume we have a year divided into 365 days because we are using days as periods in the representatives from <a href="https://github.com/TulipaEnergy/TulipaClustering.jl"><em>TulipaClustering.jl</em></a>. Also, we define the <code>max_energy_timeframe_partition = 10 MWh</code>, meaning the peak energy we want to have is 10MWh for each period or period partition. So depending on the optional information, we can have:</p><table><tr><th style="text-align: right">Profile</th><th style="text-align: right">Period Partitions</th><th style="text-align: right">Example</th></tr><tr><td style="text-align: right">None</td><td style="text-align: right">None</td><td style="text-align: right">The default profile is 1.p.u. for each period and since there are no period partitions, the constraints will be for each period (i.e., daily). So the outgoing energy of the asset for each day must be less than or equal to 10MWh.</td></tr><tr><td style="text-align: right">Defined</td><td style="text-align: right">None</td><td style="text-align: right">The profile definition and value will be in the timeframe profiles files. For example, we define a profile that has the following first four values: 0.6 p.u., 1.0 p.u., 0.8 p.u., and 0.4 p.u. There are no period partitions, so constraints will be for each period (i.e., daily). Therefore the outgoing energy of the asset for the first four days must be less than or equal to 6MWh, 10MWh, 8MWh, and 4MWh.</td></tr><tr><td style="text-align: right">Defined</td><td style="text-align: right">Defined</td><td style="text-align: right">Using the same profile as above, we now define a period partition in the timeframe partitions file as <code>uniform</code> with a value of 2. This value means that we will aggregate every two periods (i.e., every two days). So, instead of having 365 constraints, we will have 183 constraints (182 every two days and one last constraint of 1 day). Then the profile is aggregated with the sum of the values inside the periods within the partition. Thus, the outgoing energy of the asset for the first two partitions (i.e., every two days) must be less than or equal to 16MWh and 12MWh, respectively.</td></tr></table><h3 id="Group-constraints"><a class="docs-heading-anchor" href="#Group-constraints">Group constraints</a><a id="Group-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Group-constraints" title="Permalink"></a></h3><p>A group of assets refers to a set of assets that share certain constraints. For example, the investments of a group of assets may be capped at a maximum value, which represents the potential of a specific area that is restricted in terms of the maximum allowable MW due to limitations on building licenses.</p><p>Groups are useful to represent several common constraints.</p><h4 id="group-setup"><a class="docs-heading-anchor" href="#group-setup">Creating Groups</a><a id="group-setup-1"></a><a class="docs-heading-anchor-permalink" href="#group-setup" title="Permalink"></a></h4><p>In order to define the groups in the model, the following steps are necessary:</p><ol><li>Create a group file by defining the <code>name</code> property and its parameters in the <code>group_asset</code> table (or CSV file).</li><li>Assign assets to the group by setting the <code>name</code> in the <code>group</code> parameter/column of the asset file.</li></ol><div class="admonition is-info" id="Info-8b4515e1b61913c1"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-8b4515e1b61913c1" title="Permalink"></a></header><div class="admonition-body"><p>A missing value in the parameter <code>group</code> means that the asset does not belong to any group.</p></div></div><h4 id="investment-group-setup"><a class="docs-heading-anchor" href="#investment-group-setup">Group Investment constraints (maximum or minimum)</a><a id="investment-group-setup-1"></a><a class="docs-heading-anchor-permalink" href="#investment-group-setup" title="Permalink"></a></h4><p>The mathematical formulation of the maximum and minimum investment limit for group constraints is available <a href="../../40-scientific-foundation/40-formulation/#investment-group-constraints">here</a>.</p><ul><li><code>invest_method = true</code>. This parameter enables the model to use the investment group constraints.</li><li><code>min_investment_limit</code> <span>$\neq$</span> <code>missing</code> or <code>max_investment_limit</code> <span>$\neq$</span> <code>missing</code>. This value represents the limits that will be imposed on the investment that belongs to the group.</li></ul><div class="admonition is-info" id="Info-907b5d58d0ce03e2"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-907b5d58d0ce03e2" title="Permalink"></a></header><div class="admonition-body"><ol><li>A missing value in the parameters <code>min_investment_limit</code> and <code>max_investment_limit</code> means that there is no investment limit.</li><li>These constraints are applied to the investments each year. The model does not yet have investment limits to a group&#39;s available invested capacity.</li></ol></div></div><h4 id="Example:-Group-of-Assets"><a class="docs-heading-anchor" href="#Example:-Group-of-Assets">Example: Group of Assets</a><a id="Example:-Group-of-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-Group-of-Assets" title="Permalink"></a></h4><p>Let&#39;s explore how the groups are set up in the test case called <a href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/tree/main/test/inputs/Norse">Norse</a>. First, let&#39;s take a look at the <code>group-asset.csv</code> file:</p><div><div style = "float: left;"><span>2×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">name</th><th style = "text-align: left;">milestone_year</th><th style = "text-align: left;">invest_method</th><th style = "text-align: left;">min_investment_limit</th><th style = "text-align: left;">max_investment_limit</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "InlineStrings.String15" style = "text-align: left;">String15</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Union{Missing, Int64}" style = "text-align: left;">Int64?</th><th title = "Union{Missing, Int64}" style = "text-align: left;">Int64?</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">renewables</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">true</td><td style = "font-style: italic; text-align: right;">missing</td><td style = "text-align: right;">40000</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">ccgt</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">true</td><td style = "text-align: right;">10000</td><td style = "font-style: italic; text-align: right;">missing</td></tr></tbody></table></div><p>In the given data, there are two groups: <code>renewables</code> and <code>ccgt</code>. Both groups have the <code>invest_method</code> parameter set to <code>true</code>, indicating that investment group constraints apply to both. For the <code>renewables</code> group, the <code>min_investment_limit</code> parameter is missing, signifying that there is no minimum limit imposed on the group. However, the <code>max_investment_limit</code> parameter is set to 40000 MW, indicating that the total investments of assets in the group must be less than or equal to this value. In contrast, the <code>ccgt</code> group has a missing value in the <code>max_investment_limit</code> parameter, indicating no maximum limit, while the <code>min_investment_limit</code> is set to 10000 MW for the total investments in that group.</p><p>Let&#39;s now explore which assets are in each group. To do so, we can take a look at the <code>asset.csv</code> file:</p><div><div style = "float: left;"><span>4×3 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">asset</th><th style = "text-align: left;">type</th><th style = "text-align: left;">group</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "InlineStrings.String31" style = "text-align: left;">String31</th><th title = "InlineStrings.String15" style = "text-align: left;">String15</th><th title = "Union{Missing, InlineStrings.String15}" style = "text-align: left;">String15?</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">Asgard_CCGT</td><td style = "text-align: left;">conversion</td><td style = "text-align: left;">ccgt</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">Asgard_Solar</td><td style = "text-align: left;">producer</td><td style = "text-align: left;">renewables</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">Midgard_CCGT</td><td style = "text-align: left;">conversion</td><td style = "text-align: left;">ccgt</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">Midgard_Wind</td><td style = "text-align: left;">producer</td><td style = "text-align: left;">renewables</td></tr></tbody></table></div><p>Here we can see that the assets <code>Asgard_Solar</code> and <code>Midgard_Wind</code> belong to the <code>renewables</code> group, while the assets <code>Asgard_CCGT</code> and <code>Midgard_CCGT</code> belong to the <code>ccgt</code> group.</p><div class="admonition is-info" id="Info-4b0bb5d3912f94dc"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-4b0bb5d3912f94dc" title="Permalink"></a></header><div class="admonition-body"><p>If the group has a <code>min_investment_limit</code>, then assets in the group have to allow investment (<code>investable = true</code>) for the model to be feasible. If the assets are not <code>investable</code> then they cannot satisfy the minimum constraint.</p></div></div><h3 id="multi-year-setup"><a class="docs-heading-anchor" href="#multi-year-setup">Multi-year investments</a><a id="multi-year-setup-1"></a><a class="docs-heading-anchor-permalink" href="#multi-year-setup" title="Permalink"></a></h3><div class="admonition is-warning" id="The-workflow-of-feature-is-under-construction-42098f80442580d6"><header class="admonition-header">The workflow of feature is under construction<a class="admonition-anchor" href="#The-workflow-of-feature-is-under-construction-42098f80442580d6" title="Permalink"></a></header><div class="admonition-body"><p>This section describes the existing workflow but we are working to make it more user friendly.</p></div></div><p>It is possible to simutaneously model different years, which is especially relevant for modeling multi-year investments. Multi-year investments refer to making investment decisions at different points in time, such that a pathway of investments can be modeled. This is particularly useful when long-term scenarios are modeled, but modeling each year is not practical. Or in a business case, investment decisions are supposed to be made in different years which has an impact on the cash flow.</p><h4 id="Filling-the-input-data"><a class="docs-heading-anchor" href="#Filling-the-input-data">Filling the input data</a><a id="Filling-the-input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Filling-the-input-data" title="Permalink"></a></h4><p>In order to set up a model with year information, the following steps are necessary. The below illustrative example uses assets, but flows follow the same idea.</p><h5 id="Year-data"><a class="docs-heading-anchor" href="#Year-data">Year data</a><a id="Year-data-1"></a><a class="docs-heading-anchor-permalink" href="#Year-data" title="Permalink"></a></h5><p>Fill in all the years in <a href="../50-schemas/#table-schemas"><code>year-data.csv</code></a> file by defining the <code>year</code> property and its parameters. Differentiate milestone years and non-milestone years.</p><ul><li>Milestone years are the years you would like to model. For example, if you want to model operation and/or investments in 2030, 2040, and 2050. These 3 years are then milestone years.</li><li>Non-milestone years are the commission years of existing units. For example, you want to consider a existing wind unit that has been commissioned in 2020, then 2020 is a non-milestone year.</li></ul><div class="admonition is-info" id="Info-1c51930a8d86841"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-1c51930a8d86841" title="Permalink"></a></header><div class="admonition-body"><p>A year can both be a year that you want to model and that there are existing units invested, then this year is a milestone year.</p></div></div><h5 id="Asset-basic-data"><a class="docs-heading-anchor" href="#Asset-basic-data">Asset basic data</a><a id="Asset-basic-data-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-basic-data" title="Permalink"></a></h5><p>Fill in the parameters in the <code>asset.csv</code> file. These parameters are for the assets across all the years, i.e., not dependent on years. Examples are lifetime (both <code>technical_lifetime</code> and <code>economic_lifetime</code>) and capacity of a unit.</p><p>You need to choose a <code>investment_method</code> for the asset, between <code>none</code>, <code>simple</code>, and <code>compact</code>. In addition, you also have to make it explicit on which assets you would like to invest in, by setting the <code>investable</code> parameter in <code>asset-milestone.csv</code>, and which assets you would like to decommission, by setting the <code>decommissionable</code> parameter in <code>asset-both.csv</code>. More information on <code>investable</code> and <code>decommissionable</code> are given in the next sections.</p><p>Below is an overview of the important set-ups regarding the investment methods.</p><ul><li>Operation mode: choose <code>none</code>. Set <code>investable</code> and <code>decommissionable</code> to <code>false</code> to make sure neither investments nor decommissioning occur.</li><li>Simple investment method: choose <code>simple</code>. Set <code>investable</code> and <code>decommissionable</code> manually. Make sure <code>milestone_year = commission_year</code> in <code>asset-both.csv</code>. Any missing or redundant rows will throw an error.</li><li>Compact investment method: choose <code>compact</code>. Set <code>investable</code> and <code>decommissionable</code> manually. Make sure to have more than one commission year for a milestone year in <code>asset-both.csv</code>, and the matching profiles. Otherwise the compact method will work the same as the simple method.</li></ul><div class="admonition is-info" id="More-about-the-investment-methods-e89a114f91e670b3"><header class="admonition-header">More about the investment methods<a class="admonition-anchor" href="#More-about-the-investment-methods-e89a114f91e670b3" title="Permalink"></a></header><div class="admonition-body"><ol><li>The <code>compact</code> method can only be applied to producer assets and conversion assets. Transport assets and storage assets can only use <code>simple</code> or <code>none</code> method.</li><li>For more details on the constraints that apply when selecting these methods, please visit the <a href="../../40-scientific-foundation/40-formulation/#formulation"><code>mathematical formulation</code></a> section.</li></ol></div></div><h5 id="Asset-milestone-year-data"><a class="docs-heading-anchor" href="#Asset-milestone-year-data">Asset milestone year data</a><a id="Asset-milestone-year-data-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-milestone-year-data" title="Permalink"></a></h5><p>Fill in the parameters related to the milestone year. Whether the model allows investment at a milestone year for an asset is set by the <code>investable</code> parameter in <code>asset-milestone.csv</code>. You can only invest in milestone years.</p><h5 id="Asset-commission-year-data"><a class="docs-heading-anchor" href="#Asset-commission-year-data">Asset commission year data</a><a id="Asset-commission-year-data-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-commission-year-data" title="Permalink"></a></h5><p>Fill in the parameters related to the commission year, e.g., investment costs and fixed costs.</p><h5 id="Existing-capacities-and-decommissioning"><a class="docs-heading-anchor" href="#Existing-capacities-and-decommissioning">Existing capacities and decommissioning</a><a id="Existing-capacities-and-decommissioning-1"></a><a class="docs-heading-anchor-permalink" href="#Existing-capacities-and-decommissioning" title="Permalink"></a></h5><p>Existing capacities and decommissioning are taken care of in <code>asset-both.csv</code></p><ul><li>In the <code>milestone_year</code> column, fill in all the milestone years. In the <code>commission_year</code> column, fill in the commission years of the existing assets that are still available in this <code>milestone_year</code> and put the existing units in the column <code>initial_units</code>.</li><li>Whether the model allows decommissioning at a <code>milestone_year</code> for an asset that has been commissioned in a <code>commission_year</code> is set by the parameter <code>decommissionable</code>.</li></ul><p>Let&#39;s explain further using an example. To do so, we take a look at the <code>asset-both.csv</code> file:</p><div><div style = "float: left;"><span>16×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">asset</th><th style = "text-align: left;">milestone_year</th><th style = "text-align: left;">commission_year</th><th style = "text-align: left;">decommissionable</th><th style = "text-align: left;">initial_units</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "InlineStrings.String7" style = "text-align: left;">String7</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">battery</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">true</td><td style = "text-align: right;">1.09</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">battery</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">true</td><td style = "text-align: right;">2.02</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">ccgt</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">false</td><td style = "text-align: right;">1.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">ccgt</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">false</td><td style = "text-align: right;">1.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: left;">demand</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: left;">demand</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: left;">ens</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">false</td><td style = "text-align: right;">1.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: left;">ens</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">false</td><td style = "text-align: right;">1.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">9</td><td style = "text-align: left;">ocgt</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">10</td><td style = "text-align: left;">ocgt</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">11</td><td style = "text-align: left;">solar</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">12</td><td style = "text-align: left;">solar</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">13</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2020</td><td style = "text-align: right;">true</td><td style = "text-align: right;">0.07</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">14</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.02</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">15</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">true</td><td style = "text-align: right;">0.02</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">16</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">2050</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td></tr></tbody></table></div><ul><li><code>battery</code> has 1.09 existing units in 2030 and 2.02 existing units in 2050. Both units can be decommissioned.</li><li><code>ccgt</code> has 1 existing units in 2030 and 2050. Neither can be decommissioned.</li><li><code>demand</code> is a consumer, so is has no initial units and you only have data where <code>milestone_year = commission_year</code>.</li><li><code>ens</code> has 1 existing units in 2030 and 2050. Neither can be decommissioned.</li><li><code>ocgt</code> has no existing units.</li><li><code>solar</code> has no existing units.</li><li><code>wind</code> has 0.07 existing units, commissioned in 2020, and still available in 2030 but not in 2050. Another 0.02 existing units, commissioned in 2030, available in 2030 and 2050. There are no initial units commissioned in 2050.</li></ul><div class="admonition is-info" id="Info-adf4e1799d391625"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-adf4e1799d391625" title="Permalink"></a></header><div class="admonition-body"><p>We only consider the existing units which are still available in the milestone years.</p></div></div><h5 id="Profiles-information"><a class="docs-heading-anchor" href="#Profiles-information">Profiles information</a><a id="Profiles-information-1"></a><a class="docs-heading-anchor-permalink" href="#Profiles-information" title="Permalink"></a></h5><p>Important to know that you can use different profiles for assets that are commissioned in different years, which is the power of the <code>compact</code> method. You fill in the profile names in <code>assets-profiles.csv</code> for relevant years. In <code>profiles-rep-periods.csv</code>, you relate the profile names with the modeled years.</p><p>Let&#39;s explain further using an example. To do so, we can take a look at the <code>assets-profiles.csv</code> file:</p><div><div style = "float: left;"><span>7×4 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">asset</th><th style = "text-align: left;">commission_year</th><th style = "text-align: left;">profile_type</th><th style = "text-align: left;">profile_name</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "InlineStrings.String7" style = "text-align: left;">String7</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "InlineStrings.String15" style = "text-align: left;">String15</th><th title = "InlineStrings.String31" style = "text-align: left;">String31</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2020</td><td style = "text-align: left;">availability</td><td style = "text-align: left;">availability-wind2020</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2030</td><td style = "text-align: left;">availability</td><td style = "text-align: left;">availability-wind2030</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">solar</td><td style = "text-align: right;">2030</td><td style = "text-align: left;">availability</td><td style = "text-align: left;">availability-solar2030</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">demand</td><td style = "text-align: right;">2030</td><td style = "text-align: left;">demand</td><td style = "text-align: left;">demand-demand</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: left;">wind</td><td style = "text-align: right;">2050</td><td style = "text-align: left;">availability</td><td style = "text-align: left;">availability-wind2050</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: left;">solar</td><td style = "text-align: right;">2050</td><td style = "text-align: left;">availability</td><td style = "text-align: left;">availability-solar2050</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: left;">demand</td><td style = "text-align: right;">2050</td><td style = "text-align: left;">demand</td><td style = "text-align: left;">demand-demand</td></tr></tbody></table></div><p>We have 3 profiles for <code>wind</code> commissioned in 2020, 2030, and 2050, respectively. Imagine these are 3 wind turbines with different efficiencies due to the year of manufacture.</p><h4 id="Economic-representation"><a class="docs-heading-anchor" href="#Economic-representation">Economic representation</a><a id="Economic-representation-1"></a><a class="docs-heading-anchor-permalink" href="#Economic-representation" title="Permalink"></a></h4><p>For economic representation, the following parameters need to be set up:</p><ul><li>[optional] <code>discount year</code> and <code>discount rate</code> in the <code>model-parameters-example.toml</code> file: model-wide discount year and rate. By default, the model will use a discount rate of 0, and a discount year of the first milestone year. In other words, the costs will be discounted to the cost of the first milestone year.</li><li><code>discount_rate</code>: technology-specific discount rates.</li><li><code>economic_lifetime</code>: used for discounting the costs.</li></ul><div class="admonition is-info" id="Info-8b184c9a6593fd76"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-8b184c9a6593fd76" title="Permalink"></a></header><div class="admonition-body"><ol><li>Since the model explicitly discounts, all the inputs for costs should be given in the costs of the relevant year. For example, to model investments in 2030 and 2050, the <code>investment_cost</code> should be given in 2030 costs and 2050 costs, respectively.</li><li>For more details on the formulas for economic representation, please visit the <a href="../../40-scientific-foundation/40-formulation/#formulation"><code>mathematical formulation</code></a> section.</li></ol></div></div><h3 id="coefficient-for-capacity-constraints"><a class="docs-heading-anchor" href="#coefficient-for-capacity-constraints">Flow Coefficient in Capacity constraints</a><a id="coefficient-for-capacity-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#coefficient-for-capacity-constraints" title="Permalink"></a></h3><p>Capacity constraints apply to all the outputs and inputs to assets according to the equations in the <a href="../../40-scientific-foundation/40-formulation/#cap-constraints"><code>capacity constraints</code></a> section of the mathematical formulation. The coefficient <span>$p^{\text{capacity coefficient}}_{f,y}$</span> in the capacity constraints can be set to model situations or processes where the flows in the capacity constraint are multiplied by a constant factor.</p><p>For instance, a hydro reservoir (i.e., storage asset) with two outputs, one for electricity production and another for water spillage. The electricity output flow must be in the capacity constraints. However, the water spillage is an output that can be excluded from the capacity constraint. In that case, the coefficient for the capacity constraint of the water output can be zero and therefore not included in that constraint.</p><p>Another situation comes from industrial processes where the sum of both outputs must be below the capacity, but one of the outputs can be above the capacity if only produced in that flow. For example,</p><p class="math-container">\[\text{flow process A} + 0.8 \cdot \text{flow process B} \leq \text{C}\]</p><p>In that case the sum must be always below the total capacity <span>$\text{C}$</span>, but if you only produce flow through B then you can produce <span>$1.25 \cdot \text{C}$</span> and still satisfy this constraint.</p><p>To set up this parameter you need to fill in the information for the <code>capacity_coefficient</code> in the <code>flow_commission</code> table, see more in the <a href="../50-schemas/#table-schemas">model parameters</a> section.</p><h2 id="coefficient-for-conversion-constraints"><a class="docs-heading-anchor" href="#coefficient-for-conversion-constraints">Using the coefficient for flows in the conversion constraints</a><a id="coefficient-for-conversion-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#coefficient-for-conversion-constraints" title="Permalink"></a></h2><p>Conversion constraints apply to all the outputs and inputs of a conversion asset according to the equations in the <a href="../../40-scientific-foundation/40-formulation/#conversion-balance-constraints"><code>conversion balance constraints</code></a> section of the mathematical formulation. The coefficient <span>$p^{\text{conversion coefficient}}_{f,y}$</span> in that constraint can be set to model situations or processes where the flows in the conversion balance constraint are multiplied by a constant factor.</p><p>For instance, CO2 emissions modeled as an extra output of a gas-fired power plant that produces electricity. Here, the conversion is from gas (input) into electricity (output) through an efficiency parameter of the asset. However, the CO2 emissions are also an output of the asset, therefore by default they are considered in the conversion balance, unless we set the <code>conversion_coefficient</code> to zero.</p><p>To set up this parameter you need to fill in the information for the <code>conversion_coefficient</code> in the <code>flow_commission</code> table, see more in the <a href="../50-schemas/#table-schemas">model parameters</a> section.</p><div class="admonition is-info" id="Conversion-coefficient-and-flexible-time-resolution-c5fb7d307ddfbf62"><header class="admonition-header">Conversion coefficient and flexible time resolution<a class="admonition-anchor" href="#Conversion-coefficient-and-flexible-time-resolution-c5fb7d307ddfbf62" title="Permalink"></a></header><div class="admonition-body"><p>As explained in the <a href="../../30-concepts/#flex-time-res">flexible time resolution section</a>, the resolution of the conversion balance constraint is determined by the highest resolution of the input and output flows because it is treated as an energy constraint. Nevertheless, for consistency, only the flows with a <code>conversion_coefficient</code> greater than zero are included in the definition of the constraint&#39;s resolution.</p></div></div><h2 id="flow-relationships"><a class="docs-heading-anchor" href="#flow-relationships">Defining Flows Relationships</a><a id="flow-relationships-1"></a><a class="docs-heading-anchor-permalink" href="#flow-relationships" title="Permalink"></a></h2><p>Two flows in the model can be related using the <a href="../../40-scientific-foundation/40-formulation/#flows-relationships-constraints"><code>flows relationships constraints</code></a> section of the mathematical formulation. The parameters in this constraint, i.e., the constant, sense, and ratio, and the flows in the relationship are defined in the <code>flows_relationships</code> table, see more in the <a href="../50-schemas/#table-schemas">model parameters</a> section.</p><p>There will be a set of constraints for each row in the <code>flows_relationships</code> table, meaning that the same flows can have different sets of constraints to describe different relationships between them. One example is the Combined Heat and Power (CHP) extraction plants, which rely on a set of inequality constraints between the electricity and heat outputs to define a feasible operating region. For more details about this example, refer to the <a href="../../30-concepts/#flex-time-res-mimo"><code>multiple inputs and outputs</code></a> example in the concepts section.</p><h2 id="greenhouse-gas-emissions"><a class="docs-heading-anchor" href="#greenhouse-gas-emissions">Modeling Greenhouse Gas Emissions (e.g., CO2)</a><a id="greenhouse-gas-emissions-1"></a><a class="docs-heading-anchor-permalink" href="#greenhouse-gas-emissions" title="Permalink"></a></h2><p>Since the model provides a general definition of assets, specific definitions for different greenhouse gas emissions, such as CO2 or methane, do not exist. Instead, these emissions can be modeled as outputs of an asset. Through the concept of <a href="#flow-relationships"><code>flows relationships</code></a>, any input (e.g., fuel consumption) or output (e.g., electricity) of the asset can be linked to an output flow that represents greenhouse gas emissions (e.g., CO2). In this context, the fixed ratio in the relationship equation serves as the emission factor.</p><p>Thanks to the <a href="../../30-concepts/#flex-time-res"><code>flexible temporal resolution</code></a> in the model, the output flow representing greenhouse gases can have a high resolution, such as daily, monthly, or even yearly. This flexibility allows for varying resolutions based on modeling needs and helps in reducing the number of variables in the model.</p><p>Additionally, you can use either a consumer or a storage asset to represent the aggregation of a particular greenhouse gas, such as total CO2 emissions in the system. Both options are viable, and the choice depends on what the modeler finds more convenient for their analysis.</p><p>For instance, using a storage asset means that the storage level will represent the total accumulated emissions at each defined time block (or period), which can then be restricted by maximum and minimum storage levels to account for limits on total emissions. Alternatively, if you use a consumer asset, you can define the consumer&#39;s output as <span>$\geq 0$</span>, allowing you to track total emissions by post-processing all emission flows over a specified duration. This latter approach involves fewer variables since no storage level is created, but it does require post-processing to obtain the desired results. Ultimately, both methods have their pros and cons, and it is up to the modeler to decide which is best suited for their case study.</p><p>For an example of implementing CO2 emissions as a consumer asset, refer to the <a href="../../30-concepts/#flex-time-res-mimo"><code>multiple inputs and outputs</code></a> example in the concepts section.</p><div class="admonition is-warning" id="By-products-should-not-be-part-of-the-capacity-constraint-4db7a1abbca4887b"><header class="admonition-header">By-products should not be part of the capacity constraint<a class="admonition-anchor" href="#By-products-should-not-be-part-of-the-capacity-constraint-4db7a1abbca4887b" title="Permalink"></a></header><div class="admonition-body"><p>It is important to note that by-products like emissions should not be included in the capacity constraint of the asset. Therefore, the <a href="#coefficient-for-capacity-constraints"><code>capacity_coefficient</code></a> should be set to zero to prevent the asset&#39;s output flow from limiting its energy output.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../00-getting-started/">« Getting Started</a><a class="docs-footer-nextpage" href="../50-schemas/">Analysis Workflow »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 17 July 2025 14:56">Thursday 17 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
