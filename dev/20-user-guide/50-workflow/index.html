<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Analysis Workflow · TulipaEnergyModel.jl</title><meta name="title" content="Analysis Workflow · TulipaEnergyModel.jl"/><meta property="og:title" content="Analysis Workflow · TulipaEnergyModel.jl"/><meta property="twitter:title" content="Analysis Workflow · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/20-user-guide/50-workflow/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/20-user-guide/50-workflow/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/20-user-guide/50-workflow/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="TulipaEnergyModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../10-tutorials/11-setting-up/">Setting up</a></li><li><a class="tocitem" href="../../10-tutorials/12-basics/">Tutorial 1: The Basics</a></li><li><a class="tocitem" href="../../10-tutorials/13-assets/">Tutorial 2: Assets and Flows</a></li><li><a class="tocitem" href="../../10-tutorials/14-fully-flexible-time/">Tutorial 3: Flexible Time Resolution</a></li><li><a class="tocitem" href="../../10-tutorials/15-clustering-rep-periods/">Tutorial 4: Representative Periods with Tulipa Clustering</a></li><li><a class="tocitem" href="../../10-tutorials/16-storage/">Tutorial 5: Seasonal and Non-seasonal Storage</a></li><li><a class="tocitem" href="../../10-tutorials/17-multi-year-investments/">Tutorial 6: Multi-year investments</a></li><li><a class="tocitem" href="../../10-tutorials/30-workflow/">Tutorial 7: Workflow</a></li><li><a class="tocitem" href="../../10-tutorials/31-rolling-horizon/">Tutorial 8: Rolling Horizon</a></li><li><a class="tocitem" href="../../10-tutorials/40-bids-workaround/">Bids via workaround using consumer unit commitment</a></li><li><a class="tocitem" href="../../10-tutorials/99-manual-steps/">Advanced Control</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../00-getting-started/">Getting Started</a></li><li><a class="tocitem" href="../20-how-to-use/">How to Use</a></li><li class="is-active"><a class="tocitem" href>Analysis Workflow</a><ul class="internal"><li><a class="tocitem" href="#workflow-overview"><span>Workflow overview</span></a></li><li><a class="tocitem" href="#minimum-data"><span>Minimum data and using defaults</span></a></li><li><a class="tocitem" href="#groups-of-tables"><span>Groups of tables</span></a></li></ul></li><li><a class="tocitem" href="../54-input-table-schemas/">Input Table Schemas</a></li><li><a class="tocitem" href="../55-outputs/">Output Variables</a></li><li><a class="tocitem" href="../60-structures/">Internal Model Structures</a></li></ul></li><li><a class="tocitem" href="../../30-concepts/">Concepts</a></li><li><span class="tocitem">Scientific Foundation</span><ul><li><a class="tocitem" href="../../40-scientific-foundation/40-formulation/">Mathematical Formulation</a></li><li><a class="tocitem" href="../../40-scientific-foundation/45-scientific-references/">Scientific References</a></li></ul></li><li><a class="tocitem" href="../../70-reference/">API Reference</a></li><li><a class="tocitem" href="../../80-ecosystem/">Tulipa Ecosystem</a></li><li><span class="tocitem">Contributing</span><ul><li><a class="tocitem" href="../../90-contributing/90-contributing/">Contributing Guidelines</a></li><li><a class="tocitem" href="../../90-contributing/91-developer/">Developer Documentation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Analysis Workflow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Analysis Workflow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/main/docs/src/20-user-guide/50-workflow.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="data"><a class="docs-heading-anchor" href="#data">Analysis Workflow</a><a id="data-1"></a><a class="docs-heading-anchor-permalink" href="#data" title="Permalink"></a></h1><p>In this section we will look at the analysis workflow and data-handling in more detail, explaining what you need to go from raw data to analysis results.</p><ul></ul><h2 id="workflow-overview"><a class="docs-heading-anchor" href="#workflow-overview">Workflow overview</a><a id="workflow-overview-1"></a><a class="docs-heading-anchor-permalink" href="#workflow-overview" title="Permalink"></a></h2><p>Here is a snapshot overview of a regular workflow:</p><p><img src="../../figs/tulipa-workflow.jpg" alt="Tulipa Workflow. Textual explanation below."/></p><p>Workflow explanation (follow the boxes):</p><ul><li><strong>External source</strong>: The first thing that you need, and hopefully have, is data. Currently, Tulipa does not provide any public data sources, so you need to <em>load</em> all required data.</li><li><strong>Create connection</strong>: Tulipa uses a DuckDB database to store the input data, the representation of variables, constraints, and other internal tables, as well as the output. This database is linked through the <code>connection</code> argument in various parts of the API. Most notably, <a href="../../70-reference/#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>run_scenario</code></a> and <a href="../../70-reference/#TulipaEnergyModel.EnergyProblem"><code>EnergyProblem</code></a> receive the <code>connection</code> as the main argument to create the model (and various internal tables).<ul><li><strong>DuckDB connection</strong>: This area (yellow) shows which tables are created in DuckDB throughout the workflow.</li></ul></li><li><strong>Load data</strong>: Whether you have CSV/Excel/Parquet files or a separate Database containing your data, you need to load it into the DuckDB connection, i.e., create tables (or table views) with the data that you will process for Tulipa.<ul><li><strong>DuckDB connection</strong>: These are the <code>Sources</code> tables. This data can be in whatever format you want, but you will need to transform it into the Tulipa format later.</li></ul></li><li><strong>Process data into an instance (1 model run) with DuckDB/TulipaIO</strong>: Now you need to prepare the data for clustering. Even if you don&#39;t want to cluster your data, you still need to run <code>TulipaClustering.dummy_cluster!</code> to generate Tulipa&#39;s required tables. Since your data in now inside the <code>connection</code>, you can use <code>DuckDB</code>&#39;s SQL and/or <code>TulipaIO</code>&#39;s convenience functions to manipulate it. Another method is to use Julia/Python/Excel to create the data externally (from the source files or DuckDB) and load it back into DuckDB. The important thing is <a href="https://tulipaenergy.github.io/TulipaClustering.jl/stable/">you need to satisfy the TulipaClustering format.</a><ul><li><strong>DuckDB connection</strong>: These are the <code>Instance data</code> tables, but it can also be loaded with the <code>Sources</code>.</li></ul></li><li><strong>Cluster into representative periods using TulipaClustering</strong>: Run TulipaClustering to compute the representative periods and create the necessary tables.<ul><li><strong>DuckDB connection</strong>: These are the <code>Time data</code> tables. The tables created in this step are part of the cluster group (see <a href="#groups-of-tables">Groups of tables</a> below)</li></ul></li><li><strong>Prepare data for TulipaEnergyModel&#39;s format</strong>: Process your data (using <code>TulipaIO</code>, <code>DuckDB</code> or whatever method you choose) into the Tulipa Format, following the <a href="../54-input-table-schemas/#table-schemas">schema</a>. Since the format is quite extensive, you might want to use the <code>populate_with_defaults!</code> function to generate all columns and work from there. See <a href="#minimum-data">Minimum data and using defaults</a> for more details.<ul><li><strong>DuckDB connection</strong>: TulipaEnergyModel expects the <code>Time data</code> tables from the previous step and these <code>Tulipa format</code> tables. In rare instances, your data will be complete, but most likely you will need to fill-out your tables with default values for columns that are not important for your problem. The tables prepared in this step are part of the <code>input</code> <a href="#groups-of-tables">group of tables</a>.</li></ul></li><li><strong>Create internal tables for the model indices</strong>: Finally, you&#39;re ready to use TulipaEnergyModel! There are multiple ways to create and solve the model, but the idea is the same. The first interaction with Tulipa will create the tables to store the variables, constraints, and expressions indices, as well as other necessary internal tables. Data validation also checks that the tables follow the expected requirements.<ul><li><strong>DuckDB connection</strong>: These are the <code>Internal data</code> tables. Notably, the variables and constraints indices tables are created in their respective groups: <code>variables</code> and <code>constraints</code>. See the <a href="#groups-of-tables">Groups of tables</a> section for more details.</li></ul></li><li><strong>Create model</strong>: This is most of the heavy-lifting of the workflow, apart from solving the model. This step creates all the Julia/<a href="https://jump.dev">JuMP</a> structures using the tables from the previous step. For instance, a JuMP variable is created for each row of each variable table.<ul><li><strong>DuckDB connection</strong>: Very little data is created in DuckDB in this step. Some expressions that could not have been created before are created in the <code>expressions</code> group. A lot of Julia/JuMP-specific things are created, but they cannot be stored in the DuckDB connection.</li></ul></li><li><strong>Solve model</strong>: Finally, send the model to the solver and wait for a result.</li><li><strong>Store primal and dual solutions</strong>: This step computes the dual variables and then loads the values of the primals and duals into the <code>variables</code> and <code>constraints</code> tables.<ul><li><strong>DuckDB connection</strong>: Technically, no new tables are created in this step. Instead, new columns are attached to the <code>variables</code> and <code>constraints</code> tables.</li></ul></li><li><strong>Process output for plots and dashboard</strong>: Now prepare the output that you need, once again using DuckDB/TulipaIO. You can also export the data from <code>DuckDB</code> and continue your analysis with other tools.<ul><li><strong>DuckDB connection</strong>: You might create new <code>Analysis</code> tables. They can be used for the next steps or for a possible dashboard connected to the DuckDB connection.</li></ul></li><li><strong>Create plots</strong>: Optionally create plots.</li><li><strong>Export solution</strong>: Optionally export all the tables from the DuckDB connection to files, and/or create and save plots.<ul><li><strong>Output files</strong>: External. Whatever outputs you have produced and want to export to other formats. For instance, CSV/Parquet files with the full variables and constraints tables can be exported from the corresponding DuckDB tables.</li></ul></li><li><strong>Dashboard</strong>: A possible dashboard connecting directly to the DuckDB connection.</li></ul><h2 id="minimum-data"><a class="docs-heading-anchor" href="#minimum-data">Minimum data and using defaults</a><a id="minimum-data-1"></a><a class="docs-heading-anchor-permalink" href="#minimum-data" title="Permalink"></a></h2><p>Since <code>TulipaEnergyModel</code> is at a late stage in the workflow, its input data requirements are stricter. Therefore, the input data required by the Tulipa model must follow the schema in the follow section.</p><p>Dealing with defaults is hard. A missing value might represent two different things to different people. That is why we require the tables to be complete. However, we also understand that it is not reasonable to expect people to fill a lot of things that they don&#39;t need for their models. Therefore, we have created the function <a href="../../70-reference/#TulipaEnergyModel.populate_with_defaults!-Tuple{Any}"><code>populate_with_defaults!</code></a> to fill the remaining columns of your tables with default values.</p><p>To know the defaults, check the <a href="../54-input-table-schemas/#table-schemas">Table Schemas</a> below.</p><div class="admonition is-warning" id="Beware-implicit-assumptions-f513f0899963e54e"><header class="admonition-header">Beware implicit assumptions<a class="admonition-anchor" href="#Beware-implicit-assumptions-f513f0899963e54e" title="Permalink"></a></header><div class="admonition-body"><p>When data is missing and you automatically fill it with defaults, beware of your assumptions on what that means. For instance, maybe you expect the default capacity to be &quot;unlimited&quot;, or maybe you expect it to be 0. Check what are the default values and decide if you want to use them or not. If you think a default does not make sense, open an issue, or a discussion thread.</p></div></div><h3 id="Example-of-using-populate_with_defaults!"><a class="docs-heading-anchor" href="#Example-of-using-populate_with_defaults!">Example of using <code>populate_with_defaults!</code></a><a id="Example-of-using-populate_with_defaults!-1"></a><a class="docs-heading-anchor-permalink" href="#Example-of-using-populate_with_defaults!" title="Permalink"></a></h3><p>Below we have the minimum amount of data (essentially, nothing), that is necessary to start Tulipa.</p><pre><code class="language-julia hljs">using TulipaEnergyModel, TulipaIO, DuckDB, DataFrames

data = Dict(
    # Basic asset data
    &quot;asset&quot; =&gt; DataFrame(
        :asset =&gt; [&quot;some_producer&quot;, &quot;some_consumer&quot;],
        :type =&gt; [&quot;producer&quot;, &quot;consumer&quot;],
    ),
    &quot;asset_both&quot; =&gt; DataFrame(
        :asset =&gt; [&quot;some_producer&quot;, &quot;some_consumer&quot;],
        :commission_year =&gt; [2030, 2030],
        :milestone_year =&gt; [2030, 2030],
    ),
    &quot;asset_commission&quot; =&gt; DataFrame(
        :asset =&gt; [&quot;some_producer&quot;, &quot;some_consumer&quot;],
        :commission_year =&gt; [2030, 2030],
    ),
    &quot;asset_milestone&quot; =&gt; DataFrame(
        :asset =&gt; [&quot;some_producer&quot;, &quot;some_consumer&quot;],
        :milestone_year =&gt; [2030, 2030],
    ),

    # Basic flow data
    &quot;flow&quot; =&gt; DataFrame(:from_asset =&gt; [&quot;some_producer&quot;], :to_asset =&gt; [&quot;some_consumer&quot;]),
    &quot;flow_both&quot; =&gt; DataFrame(
        :from_asset =&gt; String[],
        :to_asset =&gt; String[],
        :commission_year =&gt; Int[],
        :milestone_year =&gt; Int[],
    ),
    &quot;flow_commission&quot; =&gt; DataFrame(
        :from_asset =&gt; [&quot;some_producer&quot;],
        :to_asset =&gt; [&quot;some_consumer&quot;],
        :commission_year =&gt; [2030],
    ),
    &quot;flow_milestone&quot; =&gt; DataFrame(
        :from_asset =&gt; [&quot;some_producer&quot;],
        :to_asset =&gt; [&quot;some_consumer&quot;],
        :milestone_year =&gt; [2030],
    ),

    # Basic time information
    &quot;year_data&quot; =&gt; DataFrame(:year =&gt; [2030]),
    &quot;rep_periods_data&quot; =&gt; DataFrame(:year =&gt; [2030, 2030], :rep_period =&gt; [1, 2]),
    &quot;timeframe_data&quot; =&gt; DataFrame(:year =&gt; 2030, :period =&gt; 1:365),
    &quot;rep_periods_mapping&quot; =&gt;
        DataFrame(:year =&gt; 2030, :period =&gt; 1:365, :rep_period =&gt; mod1.(1:365, 2)),
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, DataFrames.DataFrame} with 12 entries:
  &quot;asset_both&quot;          =&gt; <span class="sgr1">2×3 DataFrame</span>…
  &quot;flow_milestone&quot;      =&gt; <span class="sgr1">1×3 DataFrame</span>…
  &quot;year_data&quot;           =&gt; <span class="sgr1">1×1 DataFrame</span>…
  &quot;asset_milestone&quot;     =&gt; <span class="sgr1">2×2 DataFrame</span>…
  &quot;flow_both&quot;           =&gt; <span class="sgr1">0×4 DataFrame</span>…
  &quot;asset_commission&quot;    =&gt; <span class="sgr1">2×2 DataFrame</span>…
  &quot;rep_periods_mapping&quot; =&gt; <span class="sgr1">365×3 DataFrame</span>…
  &quot;rep_periods_data&quot;    =&gt; <span class="sgr1">2×2 DataFrame</span>…
  &quot;asset&quot;               =&gt; <span class="sgr1">2×2 DataFrame</span>…
  &quot;flow&quot;                =&gt; <span class="sgr1">1×2 DataFrame</span>…
  &quot;flow_commission&quot;     =&gt; <span class="sgr1">1×3 DataFrame</span>…
  &quot;timeframe_data&quot;      =&gt; <span class="sgr1">365×2 DataFrame</span>…</code></pre><p>And here we load this data into a DuckDB connection.</p><pre><code class="language-julia hljs">connection = DBInterface.connect(DuckDB.DB)

# Loading the minimum data in the connection
for (table_name, table) in data
    DuckDB.register_data_frame(connection, table, table_name)
end

# Table `asset`:
DuckDB.query(connection, &quot;FROM asset&quot;) |&gt; DataFrame</code></pre><div><div style = "float: left;"><span>2×2 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">asset</th><th style = "text-align: left;">type</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "String" style = "text-align: left;">String</th><th title = "String" style = "text-align: left;">String</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">producer</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: left;">consumer</td></tr></tbody></table></div><p>Now we run <code>populate_with_defaults!</code> to fill the remaining columns with default values:</p><pre><code class="language-julia hljs">TulipaEnergyModel.populate_with_defaults!(connection)

DuckDB.query(connection, &quot;FROM asset&quot;) |&gt; DataFrame</code></pre><div><div style = "float: left;"><span>2×23 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">asset</th><th style = "text-align: left;">type</th><th style = "text-align: left;">capacity</th><th style = "text-align: left;">capacity_storage_energy</th><th style = "text-align: left;">consumer_balance_sense</th><th style = "text-align: left;">discount_rate</th><th style = "text-align: left;">economic_lifetime</th><th style = "text-align: left;">energy_to_power_ratio</th><th style = "text-align: left;">investment_group</th><th style = "text-align: left;">investment_integer</th><th style = "text-align: left;">investment_integer_storage_energy</th><th style = "text-align: left;">investment_method</th><th style = "text-align: left;">is_seasonal</th><th style = "text-align: left;">max_ramp_down</th><th style = "text-align: left;">max_ramp_up</th><th style = "text-align: left;">min_operating_point</th><th style = "text-align: left;">ramping</th><th style = "text-align: left;">storage_method_energy</th><th style = "text-align: left;">technical_lifetime</th><th style = "text-align: left;">unit_commitment</th><th style = "text-align: left;">unit_commitment_integer</th><th style = "text-align: left;">unit_commitment_method</th><th style = "text-align: left;">use_binary_storage_method</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "String" style = "text-align: left;">String</th><th title = "String" style = "text-align: left;">String</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "String" style = "text-align: left;">String</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Int32" style = "text-align: left;">Int32</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Union{Missing, String}" style = "text-align: left;">String?</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "String" style = "text-align: left;">String</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Int32" style = "text-align: left;">Int32</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Union{Missing, String}" style = "text-align: left;">String?</th><th title = "Union{Missing, String}" style = "text-align: left;">String?</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">producer</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.0</td><td style = "text-align: left;">==</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.0</td><td style = "font-style: italic; text-align: left;">missing</td><td style = "text-align: right;">false</td><td style = "text-align: right;">false</td><td style = "text-align: left;">none</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">false</td><td style = "text-align: right;">false</td><td style = "text-align: right;">1</td><td style = "text-align: right;">false</td><td style = "text-align: right;">false</td><td style = "font-style: italic; text-align: left;">missing</td><td style = "font-style: italic; text-align: left;">missing</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: left;">consumer</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.0</td><td style = "text-align: left;">==</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.0</td><td style = "font-style: italic; text-align: left;">missing</td><td style = "text-align: right;">false</td><td style = "text-align: right;">false</td><td style = "text-align: left;">none</td><td style = "text-align: right;">false</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">false</td><td style = "text-align: right;">false</td><td style = "text-align: right;">1</td><td style = "text-align: right;">false</td><td style = "text-align: right;">false</td><td style = "font-style: italic; text-align: left;">missing</td><td style = "font-style: italic; text-align: left;">missing</td></tr></tbody></table></div><p>You can see that the table above has been modified to include many more columns.</p><p>Finally, the problem can be solved:</p><pre><code class="language-julia hljs">energy_problem = TulipaEnergyModel.run_scenario(
    connection;
    output_folder = mktempdir(),
    show_log = false,
)

DuckDB.query(connection, &quot;FROM var_flow LIMIT 5&quot;) |&gt; DataFrame</code></pre><div><div style = "float: left;"><span>5×10 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">id</th><th style = "text-align: left;">from_asset</th><th style = "text-align: left;">to_asset</th><th style = "text-align: left;">year</th><th style = "text-align: left;">rep_period</th><th style = "text-align: left;">capacity_coefficient</th><th style = "text-align: left;">conversion_coefficient</th><th style = "text-align: left;">time_block_start</th><th style = "text-align: left;">time_block_end</th><th style = "text-align: left;">solution</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "String" style = "text-align: left;">String</th><th title = "String" style = "text-align: left;">String</th><th title = "Int32" style = "text-align: left;">Int32</th><th title = "Int32" style = "text-align: left;">Int32</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Int32" style = "text-align: left;">Int32</th><th title = "Int32" style = "text-align: left;">Int32</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">2</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">2</td><td style = "text-align: right;">2</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">3</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">3</td><td style = "text-align: right;">3</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">4</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">4</td><td style = "text-align: right;">4</td><td style = "text-align: right;">0.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: right;">5</td><td style = "text-align: left;">some_producer</td><td style = "text-align: left;">some_consumer</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">5</td><td style = "text-align: right;">5</td><td style = "text-align: right;">0.0</td></tr></tbody></table></div><h2 id="groups-of-tables"><a class="docs-heading-anchor" href="#groups-of-tables">Groups of tables</a><a id="groups-of-tables-1"></a><a class="docs-heading-anchor-permalink" href="#groups-of-tables" title="Permalink"></a></h2><p>After creating a <code>connection</code> and loading data in a way that follows the schema (see the previous section on <a href="#minimum-data">minimum data</a>), then Tulipa will create tables to handle the model data and various internal tables. There are different groups of tables, which we explain below. See the <a href="#workflow-overview">Workflow overview</a> to see where they pop up.</p><ul><li>Required by TulipaEnergyModel. These are described in the <a href="../54-input-table-schemas/#table-schemas">Table Schemas</a>.<ul><li><code>cluster</code>: Tables created by <code>TulipaClustering</code>.</li><li><code>input</code>: Tables expected by <code>TulipaEnergyModel</code>.</li></ul></li><li>Created by TulipaEnergyModel.<ul><li><code>variables</code>: Variable indices. These tables are prefixed by <code>var_</code> in the DuckDB connection.</li><li><code>constraints</code>: Constraints indices. These tables are prefixed by <code>cons_</code> in the DuckDB connection.</li><li><code>expressions</code>: Expressions indices. These tables are prefixed by <code>expr_</code> in the DuckDB connection.</li><li><code>resolution</code>: Unrolled partition blocks of assets and flows. These tables are prefixed by either <code>asset_time_resolution_</code> or <code>flow_time_resolution_</code>.</li></ul></li></ul><p>Additionally, we create various temporary tables, which are prefixed by <code>t_</code>.</p><div class="admonition is-warning" id="Names-and-prefixes-might-change-e8b15cef177c67eb"><header class="admonition-header">Names and prefixes might change<a class="admonition-anchor" href="#Names-and-prefixes-might-change-e8b15cef177c67eb" title="Permalink"></a></header><div class="admonition-body"><p>The tables created by TulipaEnergyModel might change in name or prefix unless explicitly noted. Once Tulipa 1.0 is released, we might change this policy.</p></div></div><p>You probably don&#39;t have to navigate these tables yourself, but if you want more information, you can list them all from DuckDB using the <code>duckdb_tables()</code> table. Here are 10 random tables:</p><pre><code class="language-julia hljs">DuckDB.query(
    connection,
    &quot;SELECT table_name
    FROM duckdb_tables()
    WHERE table_name NOT LIKE &#39;t_%&#39;
    ORDER BY random() LIMIT 10&quot;
) |&gt; DataFrame</code></pre><div><div style = "float: left;"><span>10×1 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">table_name</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "String" style = "text-align: left;">String</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">cons_min_energy_over_clustered_year</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">cons_capacity_outgoing_simple_method_non_investable_storage_with_binary</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">cons_flows_relationships</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">cons_dc_power_flow</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: left;">var_flow</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: left;">asset_both</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: left;">merged_in_flows</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: left;">assets_timeframe_profiles</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">9</td><td style = "text-align: left;">flows_profiles</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">10</td><td style = "text-align: left;">var_assets_investment</td></tr></tbody></table></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../20-how-to-use/">« How to Use</a><a class="docs-footer-nextpage" href="../54-input-table-schemas/">Input Table Schemas »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 2 February 2026 16:40">Monday 2 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
